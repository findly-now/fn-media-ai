# fn-media-ai Production Environment Configuration for GKE

# Service Configuration
DEBUG=false
ENVIRONMENT=production
HOST=0.0.0.0
PORT=8000
LOG_LEVEL=INFO

# Security
ALLOWED_HOSTS=*
CORS_ORIGINS=https://findlynow.com,https://api.findlynow.com
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOW_HEADERS=*

# Kafka Configuration
KAFKA_BOOTSTRAP_SERVERS=${KAFKA_BOOTSTRAP_SERVERS}
KAFKA_SECURITY_PROTOCOL=SASL_SSL
KAFKA_SASL_MECHANISM=PLAIN
KAFKA_SASL_USERNAME=${KAFKA_USERNAME}
KAFKA_SASL_PASSWORD=${KAFKA_PASSWORD}

# Kafka Consumer
KAFKA_CONSUMER_GROUP=fn-media-ai-prod
KAFKA_CONSUMER_TOPICS=posts.events
KAFKA_AUTO_OFFSET_RESET=latest
KAFKA_ENABLE_AUTO_COMMIT=true
KAFKA_MAX_POLL_RECORDS=500

# Kafka Producer
KAFKA_POST_ENHANCED_TOPIC=posts.enhancements
KAFKA_PRODUCER_ACKS=all
KAFKA_PRODUCER_RETRIES=2147483647
KAFKA_PRODUCER_BATCH_SIZE=16384
KAFKA_PRODUCER_LINGER_MS=10

# Google Cloud Storage (using Workload Identity)
GCS_BUCKET_NAME=findly-posts-prod
GCS_PROJECT_ID=findly-now-prod
# No credentials file needed - using Workload Identity
GOOGLE_APPLICATION_CREDENTIALS=""

# Database (PostgreSQL)
DATABASE_URL=${DATABASE_URL}
DATABASE_POOL_MIN_SIZE=5
DATABASE_POOL_MAX_SIZE=20
DATABASE_POOL_TIMEOUT=30
DATABASE_COMMAND_TIMEOUT=60

# OpenAI Configuration
OPENAI_API_KEY=${OPENAI_API_KEY}
OPENAI_MODEL=gpt-4-vision-preview
OPENAI_MAX_TOKENS=2000
OPENAI_TEMPERATURE=0.1

# Redis Configuration
REDIS_URL=${REDIS_URL}
REDIS_DB=0

# AI Model Configuration
YOLO_MODEL_PATH=/app/models/yolov8n.pt
SCENE_MODEL_NAME=resnet50
ENABLE_GPU=true
MODEL_CACHE_DIR=/app/models

# Processing Configuration
MAX_PHOTOS_PER_POST=10
MAX_PHOTO_SIZE_MB=20
PROCESSING_TIMEOUT_SECONDS=300
CONFIDENCE_THRESHOLD=0.5

# Monitoring
ENABLE_METRICS=true
METRICS_PORT=9090
HEALTH_CHECK_TIMEOUT=10